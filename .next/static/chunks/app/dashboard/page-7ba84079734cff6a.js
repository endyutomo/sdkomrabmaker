(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{116:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(5155);s(2115);var r=s(2619),i=s.n(r),n=s(3998),l=s(2033),c=s(2265),d=s(6802),o=s(3630),u=s(7646),h=s(639),x=s(2593),m=s(3263),p=s(4219),f=s(2948),g=s(9307),v=s(9056),b=s(1392),j=s(5894),y=s(9315);function N(){let{supabase:e,user:t,isLoading:s}=(0,p._)(),{toast:r}=(0,j.dj)(),{data:N,isLoading:w}=(0,f.Y)("projects",e=>e.order("updated_at",{ascending:!1})),A=async(s,a)=>{if(s.preventDefault(),s.stopPropagation(),e&&t&&confirm("Apakah Anda yakin ingin menghapus proyek ini?"))try{let{error:s}=await e.from("projects").delete().eq("id",a).eq("user_id",t.id);if(s)throw s;r({title:"Proyek Dihapus",description:"Data RAB telah berhasil dihapus dari database."})}catch(e){r({variant:"destructive",title:"Gagal Menghapus",description:"Terjadi kesalahan saat menghapus data."})}};return s||w?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:(0,a.jsx)(l.A,{className:"h-8 w-8 animate-spin text-primary"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[(0,a.jsxs)("header",{className:"h-16 border-b bg-white flex items-center justify-between px-6 sticky top-0 z-30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.Logo,{className:"h-10 w-10"}),(0,a.jsx)("span",{className:"text-xl font-bold tracking-tight text-primary",children:"SDKOM RAB MAker"})]}),(0,a.jsx)(i(),{href:"/builder",children:(0,a.jsxs)(n.$,{className:"boq-accent-gradient h-10 px-6 font-bold",children:[(0,a.jsx)(c.A,{className:"h-5 w-5 mr-2"})," RAB Baru"]})})]}),(0,a.jsxs)("main",{className:"flex-1 p-8 lg:p-12 max-w-7xl mx-auto w-full",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-10",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-black text-primary mb-2",children:"Proyek Saya"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Kelola dan buka kembali dokumen RAB yang telah Anda buat dengan SDKOM RAB MAker."})]})}),N&&0!==N.length?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(e=>(0,a.jsx)(i(),{href:"/builder?id=".concat(e.id),children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl border p-6 hover:shadow-xl transition-all group relative",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("div",{className:"h-12 w-12 bg-primary/10 text-primary rounded-xl flex items-center justify-center group-hover:boq-accent-gradient group-hover:text-white transition-colors",children:(0,a.jsx)(y.Logo,{className:"h-8 w-8"})}),(0,a.jsx)(n.$,{variant:"ghost",size:"icon",className:"text-slate-300 hover:text-destructive hover:bg-destructive/10",onClick:t=>A(t,e.id),children:(0,a.jsx)(o.A,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-primary group-hover:text-accent transition-colors line-clamp-1",children:e.title||"Draft Tanpa Nama"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 opacity-50"}),(0,a.jsx)("span",{className:"line-clamp-1",children:e.client_name||"Klien belum diisi"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 opacity-50"}),(0,a.jsx)("span",{className:"line-clamp-1",children:e.project_location||"Lokasi belum diisi"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-400 pt-4 border-t",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Update: ",e.updated_at?(0,g.GP)((0,v.H)(e.updated_at),"dd MMM yyyy, HH:mm",{locale:b.id}):"Baru saja"]})]})]})]}),(0,a.jsx)("div",{className:"absolute bottom-6 right-6 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)("div",{className:"h-8 w-8 bg-accent/10 rounded-full flex items-center justify-center text-accent",children:(0,a.jsx)(m.A,{className:"h-5 w-5"})})})]})},e.id))}):(0,a.jsxs)("div",{className:"bg-white rounded-3xl border border-dashed border-slate-300 p-20 text-center flex flex-col items-center space-y-6",children:[(0,a.jsx)("div",{className:"h-20 w-20 bg-slate-100 rounded-full flex items-center justify-center text-slate-400",children:(0,a.jsx)(d.A,{className:"h-10 w-10"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-slate-900",children:"Belum ada proyek"}),(0,a.jsx)("p",{className:"text-slate-500 max-w-sm",children:"Mulai buat Rencana Anggaran Biaya (RAB) pertama Anda menggunakan bantuan AI SDKOM RAB MAker."})]}),(0,a.jsx)(i(),{href:"/builder",children:(0,a.jsx)(n.$,{size:"lg",className:"boq-accent-gradient px-10 h-12 text-lg font-bold",children:"Mulai Susun RAB"})})]})]})]})}},2948:(e,t,s)=>{"use strict";s.d(t,{Y:()=>i});var a=s(2115),r=s(4219);function i(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],{supabase:i,user:n}=(0,r._)(),[l,c]=(0,a.useState)(null),[d,o]=(0,a.useState)(!0),[u,h]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(!n){c(null),o(!1);return}let s=async()=>{o(!0);try{let s=i.from(e).select("*").eq("user_id",n.id);t&&(s=t(s));let{data:a,error:r}=await s;if(r)throw r;c(a)}catch(t){console.error("Error fetching from ".concat(e,":"),t),h(t)}finally{o(!1)}};s();let a=i.channel("".concat(e,"_changes")).on("postgres_changes",{event:"*",schema:"public",table:e,filter:"user_id=eq.".concat(n.id)},()=>{s()}).subscribe();return()=>{a.unsubscribe()}},[n,e,...s]),{data:l,isLoading:d,error:u}}},3998:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var a=s(5155),r=s(2115),i=s(7129),n=s(3101),l=s(4269);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:d=!1,...o}=e,u=d?i.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(c({variant:r,size:n,className:s})),ref:t,...o})});d.displayName="Button"},4219:(e,t,s)=>{"use strict";s.d(t,{SupabaseProvider:()=>u,_:()=>h});var a=s(5155),r=s(2115),i=s(5497),n=s(7358);let l=n.env.NEXT_PUBLIC_SUPABASE_URL||"https://osizusigsteogyivmgfa.supabase.co",c=n.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9zaXp1c2lnc3Rlb2d5aXZtZ2ZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5NzkwMjIsImV4cCI6MjA4NjU1NTAyMn0.hOgsqHUmqnlLM8g4eUAkbw00X-XIiMdXZslvZ7vNrEc",d=(0,i.UU)(l,c),o=(0,r.createContext)(void 0);function u(e){let{children:t}=e,[s,i]=(0,r.useState)(null),[n,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{d.auth.getSession().then(e=>{var t;let{data:{session:s}}=e;i(s),l(null!=(t=null==s?void 0:s.user)?t:null),u(!1)});let{data:{subscription:e}}=d.auth.onAuthStateChange((e,t)=>{var s;i(t),l(null!=(s=null==t?void 0:t.user)?s:null),u(!1)});return()=>{e.unsubscribe()}},[]),(0,a.jsx)(o.Provider,{value:{supabase:d,session:s,user:n,isLoading:c},children:t})}let h=()=>{let e=(0,r.useContext)(o);if(void 0===e)throw Error("useSupabase must be used within a SupabaseProvider");return e}},4269:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var a=s(2821),r=s(5889);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},5894:(e,t,s)=>{"use strict";s.d(t,{dj:()=>u});var a=s(2115);let r=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=[],c={toasts:[]};function d(e){c=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(c,e),l.forEach(e=>{e(c)})}function o(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=a.useState(c);return a.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:o,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},8175:(e,t,s)=>{Promise.resolve().then(s.bind(s,116))},9315:(e,t,s)=>{"use strict";s.d(t,{Logo:()=>r});var a=s(5155);function r(e){let{className:t="h-8 w-8"}=e;return(0,a.jsxs)("svg",{viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[(0,a.jsx)("path",{d:"M20 50C20 33.4315 33.4315 20 50 20C66.5685 20 80 33.4315 80 50",stroke:"#2E3192",strokeWidth:"6",strokeLinecap:"round"}),(0,a.jsx)("path",{d:"M80 50C80 66.5685 66.5685 80 50 80C33.4315 80 20 66.5685 20 50",stroke:"#ED1C24",strokeWidth:"6",strokeLinecap:"round"}),(0,a.jsx)("path",{d:"M65 60C70.5228 60 75 55.5228 75 50C75 44.4772 70.5228 40 65 40C64.6544 40 64.3146 40.0175 63.9806 40.0514C61.9427 34.1951 56.4554 30 50 30C42.0673 30 35.419 36.4385 35.0189 44.2464C32.1856 45.4807 30 48.3396 30 51.6667C30 56.269 33.731 60 38.3333 60H65Z",fill:"#0071BC"}),(0,a.jsx)("rect",{x:"42",y:"42",width:"4",height:"12",rx:"1",fill:"white"}),(0,a.jsx)("rect",{x:"48",y:"42",width:"4",height:"12",rx:"1",fill:"white"}),(0,a.jsx)("rect",{x:"54",y:"42",width:"4",height:"12",rx:"1",fill:"white"})]})}s(2115)}},e=>{e.O(0,[206,619,939,441,255,358],()=>e(e.s=8175)),_N_E=e.O()}]);